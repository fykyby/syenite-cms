{% set depth = depth|default(0) %}

<div x-data="{ key: `${key}[${field.key}]`}">
    <template x-if="field.type === 'input'">
        {% include 'page/_fields/_input.twig' %}
    </template>
    <template x-if="field.type === 'textarea'">
        {% include 'page/_fields/_textarea.twig' %}
    </template>
    <template x-if="field.type === 'media'">
        {% include 'page/_fields/_media.twig' %}
    </template>
    <template x-if="field.type === 'date'">
        {% include 'page/_fields/_date.twig' %}
    </template>
    <template x-if="field.type === 'time'">
        {% include 'page/_fields/_time.twig' %}
    </template>
    <template x-if="field.type === 'select'">
        {% include 'page/_fields/_select.twig' %}
    </template>
    <template x-if="field.type === 'checkbox'">
        {% include 'page/_fields/_checkbox.twig' %}
    </template>
    <template x-if="field.type === 'fieldset'">
        {% if depth < 6 %}
            {% include 'page/_fields/_fieldset.twig' with {
                depth: depth + 1
            } %}
        {% endif %}
    </template>
    <template x-if="field.type === 'array'">
        {% if depth < 4 %}
            {% include 'page/_fields/_array.twig' with {
                depth: depth + 1
            } %}
        {% endif %}
    </template>
</div>
